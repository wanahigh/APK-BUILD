if (self.CavalryLogger) { CavalryLogger.start_js(["g496E"]); }

__d('SphericalMediaConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={COMP_PHOTO_EDIT_THUMB:'PhotoEditThumbanil',COMP_PHOTO_VIEWER:'PhotoViewer',EDIT_VIEWPORT_SIZE:{width:476,height:476},HI_ALPHA_BG:{start:.2,end:.5},HI_ALPHA_ELEMENT:{start:.5,end:.85},HI_ALPHA_DURATION:400,HI_SIZE_NORMAL:{width:35,height:35,center_radius:2,background_radius:17.5,inner_radius:12,arc_radius:6.3,arc_stroke:5.3,inner_stroke:1,triangle:[2,2.5,5.2],rim_radius:16.8,rim_stroke:1.4},HI_SIZE_FULL:{width:50,height:50,center_radius:3,background_radius:25,inner_radius:17.14,arc_radius:9,arc_stroke:7.57,inner_stroke:1.5,triangle:[2.85,4.29,7.9],rim_radius:24,rim_stroke:2},HI_BLINK_ARC_RAD:Math.PI/6,HI_BLINK_DURATION:400,HI_FADE_OUT_DELAY:1000,MOUSE_EXPOSURE:4000,LOGGER_SURFACES:{newsfeed:'newsfeed',timeline:'timeline',fullpage:'photo_viewer',snowlift:'www_snowlift',composer:'composer',albumComposer:'album_composer',other:'other'},LOGGER_SIGNIFICANT_MOVEMENT_DEGREE:30,LOGGER_SIGNIFICANT_MOVEMENT_MS:1000,GYRO_SLIP_FACTOR:.15,RB_SPRING_FACTOR:25,RB_MAX_SPRING_DEGREE:15,RB_MAX_STRETCH_X_DEGREE:20,RB_MAX_STRETCH_Y_DEGREE:20,RB_FRICTION:.3,TILED_CUBE_FACES:{PLUS_X:2,MINUS_X:0,PLUS_Y:4,MINUS_Y:5,PLUS_Z:3,MINUS_Z:1},TILED_CUBE_TILE_CONTENT_SIZE:510,TILED_CUBE_TILE_PADDING_PIXELS:1,TAG:'tag',TAGGED_FACEBOX:'tagged_facebox',UNTAGGED_FACEBOX:'untagged_facebox',DEFAULT_SPATIAL_TAG_SIZE_DEGREE:10};f.exports=h}),null);
__d("gl-matrix-common",[],(function a(b,c,d,e,f,g){var h={};h.EPSILON=1e-6;h.ARRAY_TYPE=typeof Float32Array!=='undefined'?Float32Array:Array;h.RANDOM=Math.random;h.ENABLE_SIMD=false;h.SIMD_AVAILABLE=h.ARRAY_TYPE===this.Float32Array&&'SIMD' in this;h.USE_SIMD=h.ENABLE_SIMD&&h.SIMD_AVAILABLE;h.setMatrixArrayType=function(j){h.ARRAY_TYPE=j};var i=Math.PI/180;h.toRadian=function(j){return j*i};h.equals=function(j,k){return Math.abs(j-k)<=h.EPSILON*Math.max(1,Math.abs(j),Math.abs(k))};f.exports=h}),null);
__d("gl-matrix-mat4",["gl-matrix-common"],(function a(b,c,d,e,f,g){var h=c("gl-matrix-common"),i={scalar:{},SIMD:{}};i.create=function(){var j=new h.ARRAY_TYPE(16);j[0]=1;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=1;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=1;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.clone=function(j){var k=new h.ARRAY_TYPE(16);k[0]=j[0];k[1]=j[1];k[2]=j[2];k[3]=j[3];k[4]=j[4];k[5]=j[5];k[6]=j[6];k[7]=j[7];k[8]=j[8];k[9]=j[9];k[10]=j[10];k[11]=j[11];k[12]=j[12];k[13]=j[13];k[14]=j[14];k[15]=j[15];return k};i.copy=function(j,k){j[0]=k[0];j[1]=k[1];j[2]=k[2];j[3]=k[3];j[4]=k[4];j[5]=k[5];j[6]=k[6];j[7]=k[7];j[8]=k[8];j[9]=k[9];j[10]=k[10];j[11]=k[11];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];return j};i.fromValues=function(j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=new h.ARRAY_TYPE(16);z[0]=j;z[1]=k;z[2]=l;z[3]=m;z[4]=n;z[5]=o;z[6]=p;z[7]=q;z[8]=r;z[9]=s;z[10]=t;z[11]=u;z[12]=v;z[13]=w;z[14]=x;z[15]=y;return z};i.set=function(j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){j[0]=k;j[1]=l;j[2]=m;j[3]=n;j[4]=o;j[5]=p;j[6]=q;j[7]=r;j[8]=s;j[9]=t;j[10]=u;j[11]=v;j[12]=w;j[13]=x;j[14]=y;j[15]=z;return j};i.identity=function(j){j[0]=1;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=1;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=1;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.scalar.transpose=function(j,k){if(j===k){var l=k[1],m=k[2],n=k[3],o=k[6],p=k[7],q=k[11];j[1]=k[4];j[2]=k[8];j[3]=k[12];j[4]=l;j[6]=k[9];j[7]=k[13];j[8]=m;j[9]=o;j[11]=k[14];j[12]=n;j[13]=p;j[14]=q}else{j[0]=k[0];j[1]=k[4];j[2]=k[8];j[3]=k[12];j[4]=k[1];j[5]=k[5];j[6]=k[9];j[7]=k[13];j[8]=k[2];j[9]=k[6];j[10]=k[10];j[11]=k[14];j[12]=k[3];j[13]=k[7];j[14]=k[11];j[15]=k[15]}return j};i.SIMD.transpose=function(j,k){var l,m,n,o,p,q,r,s,t,u;l=SIMD.Float32x4.load(k,0);m=SIMD.Float32x4.load(k,4);n=SIMD.Float32x4.load(k,8);o=SIMD.Float32x4.load(k,12);p=SIMD.Float32x4.shuffle(l,m,0,1,4,5);q=SIMD.Float32x4.shuffle(n,o,0,1,4,5);r=SIMD.Float32x4.shuffle(p,q,0,2,4,6);s=SIMD.Float32x4.shuffle(p,q,1,3,5,7);SIMD.Float32x4.store(j,0,r);SIMD.Float32x4.store(j,4,s);p=SIMD.Float32x4.shuffle(l,m,2,3,6,7);q=SIMD.Float32x4.shuffle(n,o,2,3,6,7);t=SIMD.Float32x4.shuffle(p,q,0,2,4,6);u=SIMD.Float32x4.shuffle(p,q,1,3,5,7);SIMD.Float32x4.store(j,8,t);SIMD.Float32x4.store(j,12,u);return j};i.transpose=h.USE_SIMD?i.SIMD.transpose:i.scalar.transpose;i.scalar.invert=function(j,k){var l=k[0],m=k[1],n=k[2],o=k[3],p=k[4],q=k[5],r=k[6],s=k[7],t=k[8],u=k[9],v=k[10],w=k[11],x=k[12],y=k[13],z=k[14],aa=k[15],ba=l*q-m*p,ca=l*r-n*p,da=l*s-o*p,ea=m*r-n*q,fa=m*s-o*q,ga=n*s-o*r,ha=t*y-u*x,ia=t*z-v*x,ja=t*aa-w*x,ka=u*z-v*y,la=u*aa-w*y,ma=v*aa-w*z,na=ba*ma-ca*la+da*ka+ea*ja-fa*ia+ga*ha;if(!na)return null;na=1/na;j[0]=(q*ma-r*la+s*ka)*na;j[1]=(n*la-m*ma-o*ka)*na;j[2]=(y*ga-z*fa+aa*ea)*na;j[3]=(v*fa-u*ga-w*ea)*na;j[4]=(r*ja-p*ma-s*ia)*na;j[5]=(l*ma-n*ja+o*ia)*na;j[6]=(z*da-x*ga-aa*ca)*na;j[7]=(t*ga-v*da+w*ca)*na;j[8]=(p*la-q*ja+s*ha)*na;j[9]=(m*ja-l*la-o*ha)*na;j[10]=(x*fa-y*da+aa*ba)*na;j[11]=(u*da-t*fa-w*ba)*na;j[12]=(q*ia-p*ka-r*ha)*na;j[13]=(l*ka-m*ia+n*ha)*na;j[14]=(y*ca-x*ea-z*ba)*na;j[15]=(t*ea-u*ca+v*ba)*na;return j};i.SIMD.invert=function(j,k){var l,m,n,o,p,q,r,s,t,u,v=SIMD.Float32x4.load(k,0),w=SIMD.Float32x4.load(k,4),x=SIMD.Float32x4.load(k,8),y=SIMD.Float32x4.load(k,12);p=SIMD.Float32x4.shuffle(v,w,0,1,4,5);m=SIMD.Float32x4.shuffle(x,y,0,1,4,5);l=SIMD.Float32x4.shuffle(p,m,0,2,4,6);m=SIMD.Float32x4.shuffle(m,p,1,3,5,7);p=SIMD.Float32x4.shuffle(v,w,2,3,6,7);o=SIMD.Float32x4.shuffle(x,y,2,3,6,7);n=SIMD.Float32x4.shuffle(p,o,0,2,4,6);o=SIMD.Float32x4.shuffle(o,p,1,3,5,7);p=SIMD.Float32x4.mul(n,o);p=SIMD.Float32x4.swizzle(p,1,0,3,2);q=SIMD.Float32x4.mul(m,p);r=SIMD.Float32x4.mul(l,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(m,p),q);r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,p),r);r=SIMD.Float32x4.swizzle(r,2,3,0,1);p=SIMD.Float32x4.mul(m,n);p=SIMD.Float32x4.swizzle(p,1,0,3,2);q=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,p),q);t=SIMD.Float32x4.mul(l,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(o,p));t=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,p),t);t=SIMD.Float32x4.swizzle(t,2,3,0,1);p=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,2,3,0,1),o);p=SIMD.Float32x4.swizzle(p,1,0,3,2);n=SIMD.Float32x4.swizzle(n,2,3,0,1);q=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,p),q);s=SIMD.Float32x4.mul(l,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(n,p));s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,p),s);s=SIMD.Float32x4.swizzle(s,2,3,0,1);p=SIMD.Float32x4.mul(l,m);p=SIMD.Float32x4.swizzle(p,1,0,3,2);s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,p),s);t=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,p),t);p=SIMD.Float32x4.swizzle(p,2,3,0,1);s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,p),s);t=SIMD.Float32x4.sub(t,SIMD.Float32x4.mul(n,p));p=SIMD.Float32x4.mul(l,o);p=SIMD.Float32x4.swizzle(p,1,0,3,2);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(n,p));s=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,p),s);p=SIMD.Float32x4.swizzle(p,2,3,0,1);r=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,p),r);s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(m,p));p=SIMD.Float32x4.mul(l,n);p=SIMD.Float32x4.swizzle(p,1,0,3,2);r=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,p),r);t=SIMD.Float32x4.sub(t,SIMD.Float32x4.mul(m,p));p=SIMD.Float32x4.swizzle(p,2,3,0,1);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(o,p));t=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,p),t);u=SIMD.Float32x4.mul(l,q);u=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(u,2,3,0,1),u);u=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(u,1,0,3,2),u);p=SIMD.Float32x4.reciprocalApproximation(u);u=SIMD.Float32x4.sub(SIMD.Float32x4.add(p,p),SIMD.Float32x4.mul(u,SIMD.Float32x4.mul(p,p)));u=SIMD.Float32x4.swizzle(u,0,0,0,0);if(!u)return null;SIMD.Float32x4.store(j,0,SIMD.Float32x4.mul(u,q));SIMD.Float32x4.store(j,4,SIMD.Float32x4.mul(u,r));SIMD.Float32x4.store(j,8,SIMD.Float32x4.mul(u,s));SIMD.Float32x4.store(j,12,SIMD.Float32x4.mul(u,t));return j};i.invert=h.USE_SIMD?i.SIMD.invert:i.scalar.invert;i.scalar.adjoint=function(j,k){var l=k[0],m=k[1],n=k[2],o=k[3],p=k[4],q=k[5],r=k[6],s=k[7],t=k[8],u=k[9],v=k[10],w=k[11],x=k[12],y=k[13],z=k[14],aa=k[15];j[0]=q*(v*aa-w*z)-u*(r*aa-s*z)+y*(r*w-s*v);j[1]=-(m*(v*aa-w*z)-u*(n*aa-o*z)+y*(n*w-o*v));j[2]=m*(r*aa-s*z)-q*(n*aa-o*z)+y*(n*s-o*r);j[3]=-(m*(r*w-s*v)-q*(n*w-o*v)+u*(n*s-o*r));j[4]=-(p*(v*aa-w*z)-t*(r*aa-s*z)+x*(r*w-s*v));j[5]=l*(v*aa-w*z)-t*(n*aa-o*z)+x*(n*w-o*v);j[6]=-(l*(r*aa-s*z)-p*(n*aa-o*z)+x*(n*s-o*r));j[7]=l*(r*w-s*v)-p*(n*w-o*v)+t*(n*s-o*r);j[8]=p*(u*aa-w*y)-t*(q*aa-s*y)+x*(q*w-s*u);j[9]=-(l*(u*aa-w*y)-t*(m*aa-o*y)+x*(m*w-o*u));j[10]=l*(q*aa-s*y)-p*(m*aa-o*y)+x*(m*s-o*q);j[11]=-(l*(q*w-s*u)-p*(m*w-o*u)+t*(m*s-o*q));j[12]=-(p*(u*z-v*y)-t*(q*z-r*y)+x*(q*v-r*u));j[13]=l*(u*z-v*y)-t*(m*z-n*y)+x*(m*v-n*u);j[14]=-(l*(q*z-r*y)-p*(m*z-n*y)+x*(m*r-n*q));j[15]=l*(q*v-r*u)-p*(m*v-n*u)+t*(m*r-n*q);return j};i.SIMD.adjoint=function(j,k){var l,m,n,o,p,q,r,s,t,u,v,w,x;l=SIMD.Float32x4.load(k,0);m=SIMD.Float32x4.load(k,4);n=SIMD.Float32x4.load(k,8);o=SIMD.Float32x4.load(k,12);t=SIMD.Float32x4.shuffle(l,m,0,1,4,5);q=SIMD.Float32x4.shuffle(n,o,0,1,4,5);p=SIMD.Float32x4.shuffle(t,q,0,2,4,6);q=SIMD.Float32x4.shuffle(q,t,1,3,5,7);t=SIMD.Float32x4.shuffle(l,m,2,3,6,7);s=SIMD.Float32x4.shuffle(n,o,2,3,6,7);r=SIMD.Float32x4.shuffle(t,s,0,2,4,6);s=SIMD.Float32x4.shuffle(s,t,1,3,5,7);t=SIMD.Float32x4.mul(r,s);t=SIMD.Float32x4.swizzle(t,1,0,3,2);u=SIMD.Float32x4.mul(q,t);v=SIMD.Float32x4.mul(p,t);t=SIMD.Float32x4.swizzle(t,2,3,0,1);u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(q,t),u);v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,t),v);v=SIMD.Float32x4.swizzle(v,2,3,0,1);t=SIMD.Float32x4.mul(q,r);t=SIMD.Float32x4.swizzle(t,1,0,3,2);u=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,t),u);x=SIMD.Float32x4.mul(p,t);t=SIMD.Float32x4.swizzle(t,2,3,0,1);u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(s,t));x=SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,t),x);x=SIMD.Float32x4.swizzle(x,2,3,0,1);t=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(q,2,3,0,1),s);t=SIMD.Float32x4.swizzle(t,1,0,3,2);r=SIMD.Float32x4.swizzle(r,2,3,0,1);u=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,t),u);w=SIMD.Float32x4.mul(p,t);t=SIMD.Float32x4.swizzle(t,2,3,0,1);u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(r,t));w=SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,t),w);w=SIMD.Float32x4.swizzle(w,2,3,0,1);t=SIMD.Float32x4.mul(p,q);t=SIMD.Float32x4.swizzle(t,1,0,3,2);w=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,t),w);x=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,t),x);t=SIMD.Float32x4.swizzle(t,2,3,0,1);w=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,t),w);x=SIMD.Float32x4.sub(x,SIMD.Float32x4.mul(r,t));t=SIMD.Float32x4.mul(p,s);t=SIMD.Float32x4.swizzle(t,1,0,3,2);v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(r,t));w=SIMD.Float32x4.add(SIMD.Float32x4.mul(q,t),w);t=SIMD.Float32x4.swizzle(t,2,3,0,1);v=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,t),v);w=SIMD.Float32x4.sub(w,SIMD.Float32x4.mul(q,t));t=SIMD.Float32x4.mul(p,r);t=SIMD.Float32x4.swizzle(t,1,0,3,2);v=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,t),v);x=SIMD.Float32x4.sub(x,SIMD.Float32x4.mul(q,t));t=SIMD.Float32x4.swizzle(t,2,3,0,1);v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(s,t));x=SIMD.Float32x4.add(SIMD.Float32x4.mul(q,t),x);SIMD.Float32x4.store(j,0,u);SIMD.Float32x4.store(j,4,v);SIMD.Float32x4.store(j,8,w);SIMD.Float32x4.store(j,12,x);return j};i.adjoint=h.USE_SIMD?i.SIMD.adjoint:i.scalar.adjoint;i.determinant=function(j){var k=j[0],l=j[1],m=j[2],n=j[3],o=j[4],p=j[5],q=j[6],r=j[7],s=j[8],t=j[9],u=j[10],v=j[11],w=j[12],x=j[13],y=j[14],z=j[15],aa=k*p-l*o,ba=k*q-m*o,ca=k*r-n*o,da=l*q-m*p,ea=l*r-n*p,fa=m*r-n*q,ga=s*x-t*w,ha=s*y-u*w,ia=s*z-v*w,ja=t*y-u*x,ka=t*z-v*x,la=u*z-v*y;return aa*la-ba*ka+ca*ja+da*ia-ea*ha+fa*ga};i.SIMD.multiply=function(j,k,l){var m=SIMD.Float32x4.load(k,0),n=SIMD.Float32x4.load(k,4),o=SIMD.Float32x4.load(k,8),p=SIMD.Float32x4.load(k,12),q=SIMD.Float32x4.load(l,0),r=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(q,0,0,0,0),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(q,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(q,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(q,3,3,3,3),p))));SIMD.Float32x4.store(j,0,r);var s=SIMD.Float32x4.load(l,4),t=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),p))));SIMD.Float32x4.store(j,4,t);var u=SIMD.Float32x4.load(l,8),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),p))));SIMD.Float32x4.store(j,8,v);var w=SIMD.Float32x4.load(l,12),x=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(w,0,0,0,0),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(w,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(w,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(w,3,3,3,3),p))));SIMD.Float32x4.store(j,12,x);return j};i.scalar.multiply=function(j,k,l){var m=k[0],n=k[1],o=k[2],p=k[3],q=k[4],r=k[5],s=k[6],t=k[7],u=k[8],v=k[9],w=k[10],x=k[11],y=k[12],z=k[13],aa=k[14],ba=k[15],ca=l[0],da=l[1],ea=l[2],fa=l[3];j[0]=ca*m+da*q+ea*u+fa*y;j[1]=ca*n+da*r+ea*v+fa*z;j[2]=ca*o+da*s+ea*w+fa*aa;j[3]=ca*p+da*t+ea*x+fa*ba;ca=l[4];da=l[5];ea=l[6];fa=l[7];j[4]=ca*m+da*q+ea*u+fa*y;j[5]=ca*n+da*r+ea*v+fa*z;j[6]=ca*o+da*s+ea*w+fa*aa;j[7]=ca*p+da*t+ea*x+fa*ba;ca=l[8];da=l[9];ea=l[10];fa=l[11];j[8]=ca*m+da*q+ea*u+fa*y;j[9]=ca*n+da*r+ea*v+fa*z;j[10]=ca*o+da*s+ea*w+fa*aa;j[11]=ca*p+da*t+ea*x+fa*ba;ca=l[12];da=l[13];ea=l[14];fa=l[15];j[12]=ca*m+da*q+ea*u+fa*y;j[13]=ca*n+da*r+ea*v+fa*z;j[14]=ca*o+da*s+ea*w+fa*aa;j[15]=ca*p+da*t+ea*x+fa*ba;return j};i.multiply=h.USE_SIMD?i.SIMD.multiply:i.scalar.multiply;i.mul=i.multiply;i.scalar.translate=function(j,k,l){var m=l[0],n=l[1],o=l[2],p,q,r,s,t,u,v,w,x,y,z,aa;if(k===j){j[12]=k[0]*m+k[4]*n+k[8]*o+k[12];j[13]=k[1]*m+k[5]*n+k[9]*o+k[13];j[14]=k[2]*m+k[6]*n+k[10]*o+k[14];j[15]=k[3]*m+k[7]*n+k[11]*o+k[15]}else{p=k[0];q=k[1];r=k[2];s=k[3];t=k[4];u=k[5];v=k[6];w=k[7];x=k[8];y=k[9];z=k[10];aa=k[11];j[0]=p;j[1]=q;j[2]=r;j[3]=s;j[4]=t;j[5]=u;j[6]=v;j[7]=w;j[8]=x;j[9]=y;j[10]=z;j[11]=aa;j[12]=p*m+t*n+x*o+k[12];j[13]=q*m+u*n+y*o+k[13];j[14]=r*m+v*n+z*o+k[14];j[15]=s*m+w*n+aa*o+k[15]}return j};i.SIMD.translate=function(j,k,l){var m=SIMD.Float32x4.load(k,0),n=SIMD.Float32x4.load(k,4),o=SIMD.Float32x4.load(k,8),p=SIMD.Float32x4.load(k,12),q=SIMD.Float32x4(l[0],l[1],l[2],0);if(k!==j){j[0]=k[0];j[1]=k[1];j[2]=k[2];j[3]=k[3];j[4]=k[4];j[5]=k[5];j[6]=k[6];j[7]=k[7];j[8]=k[8];j[9]=k[9];j[10]=k[10];j[11]=k[11]}m=SIMD.Float32x4.mul(m,SIMD.Float32x4.swizzle(q,0,0,0,0));n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(q,1,1,1,1));o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(q,2,2,2,2));var r=SIMD.Float32x4.add(m,SIMD.Float32x4.add(n,SIMD.Float32x4.add(o,p)));SIMD.Float32x4.store(j,12,r);return j};i.translate=h.USE_SIMD?i.SIMD.translate:i.scalar.translate;i.scalar.scale=function(j,k,l){var m=l[0],n=l[1],o=l[2];j[0]=k[0]*m;j[1]=k[1]*m;j[2]=k[2]*m;j[3]=k[3]*m;j[4]=k[4]*n;j[5]=k[5]*n;j[6]=k[6]*n;j[7]=k[7]*n;j[8]=k[8]*o;j[9]=k[9]*o;j[10]=k[10]*o;j[11]=k[11]*o;j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];return j};i.SIMD.scale=function(j,k,l){var m,n,o,p=SIMD.Float32x4(l[0],l[1],l[2],0);m=SIMD.Float32x4.load(k,0);SIMD.Float32x4.store(j,0,SIMD.Float32x4.mul(m,SIMD.Float32x4.swizzle(p,0,0,0,0)));n=SIMD.Float32x4.load(k,4);SIMD.Float32x4.store(j,4,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(p,1,1,1,1)));o=SIMD.Float32x4.load(k,8);SIMD.Float32x4.store(j,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(p,2,2,2,2)));j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];return j};i.scale=h.USE_SIMD?i.SIMD.scale:i.scalar.scale;i.rotate=function(j,k,l,m){var n=m[0],o=m[1],p=m[2],q=Math.sqrt(n*n+o*o+p*p),r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa;if(Math.abs(q)<h.EPSILON)return null;q=1/q;n*=q;o*=q;p*=q;r=Math.sin(l);s=Math.cos(l);t=1-s;u=k[0];v=k[1];w=k[2];x=k[3];y=k[4];z=k[5];aa=k[6];ba=k[7];ca=k[8];da=k[9];ea=k[10];fa=k[11];ga=n*n*t+s;ha=o*n*t+p*r;ia=p*n*t-o*r;ja=n*o*t-p*r;ka=o*o*t+s;la=p*o*t+n*r;ma=n*p*t+o*r;na=o*p*t-n*r;oa=p*p*t+s;j[0]=u*ga+y*ha+ca*ia;j[1]=v*ga+z*ha+da*ia;j[2]=w*ga+aa*ha+ea*ia;j[3]=x*ga+ba*ha+fa*ia;j[4]=u*ja+y*ka+ca*la;j[5]=v*ja+z*ka+da*la;j[6]=w*ja+aa*ka+ea*la;j[7]=x*ja+ba*ka+fa*la;j[8]=u*ma+y*na+ca*oa;j[9]=v*ma+z*na+da*oa;j[10]=w*ma+aa*na+ea*oa;j[11]=x*ma+ba*na+fa*oa;if(k!==j){j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15]}return j};i.scalar.rotateX=function(j,k,l){var m=Math.sin(l),n=Math.cos(l),o=k[4],p=k[5],q=k[6],r=k[7],s=k[8],t=k[9],u=k[10],v=k[11];if(k!==j){j[0]=k[0];j[1]=k[1];j[2]=k[2];j[3]=k[3];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15]}j[4]=o*n+s*m;j[5]=p*n+t*m;j[6]=q*n+u*m;j[7]=r*n+v*m;j[8]=s*n-o*m;j[9]=t*n-p*m;j[10]=u*n-q*m;j[11]=v*n-r*m;return j};i.SIMD.rotateX=function(j,k,l){var m=SIMD.Float32x4.splat(Math.sin(l)),n=SIMD.Float32x4.splat(Math.cos(l));if(k!==j){j[0]=k[0];j[1]=k[1];j[2]=k[2];j[3]=k[3];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15]}var o=SIMD.Float32x4.load(k,4),p=SIMD.Float32x4.load(k,8);SIMD.Float32x4.store(j,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(p,m)));SIMD.Float32x4.store(j,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,n),SIMD.Float32x4.mul(o,m)));return j};i.rotateX=h.USE_SIMD?i.SIMD.rotateX:i.scalar.rotateX;i.scalar.rotateY=function(j,k,l){var m=Math.sin(l),n=Math.cos(l),o=k[0],p=k[1],q=k[2],r=k[3],s=k[8],t=k[9],u=k[10],v=k[11];if(k!==j){j[4]=k[4];j[5]=k[5];j[6]=k[6];j[7]=k[7];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15]}j[0]=o*n-s*m;j[1]=p*n-t*m;j[2]=q*n-u*m;j[3]=r*n-v*m;j[8]=o*m+s*n;j[9]=p*m+t*n;j[10]=q*m+u*n;j[11]=r*m+v*n;return j};i.SIMD.rotateY=function(j,k,l){var m=SIMD.Float32x4.splat(Math.sin(l)),n=SIMD.Float32x4.splat(Math.cos(l));if(k!==j){j[4]=k[4];j[5]=k[5];j[6]=k[6];j[7]=k[7];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15]}var o=SIMD.Float32x4.load(k,0),p=SIMD.Float32x4.load(k,8);SIMD.Float32x4.store(j,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(p,m)));SIMD.Float32x4.store(j,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,m),SIMD.Float32x4.mul(p,n)));return j};i.rotateY=h.USE_SIMD?i.SIMD.rotateY:i.scalar.rotateY;i.scalar.rotateZ=function(j,k,l){var m=Math.sin(l),n=Math.cos(l),o=k[0],p=k[1],q=k[2],r=k[3],s=k[4],t=k[5],u=k[6],v=k[7];if(k!==j){j[8]=k[8];j[9]=k[9];j[10]=k[10];j[11]=k[11];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15]}j[0]=o*n+s*m;j[1]=p*n+t*m;j[2]=q*n+u*m;j[3]=r*n+v*m;j[4]=s*n-o*m;j[5]=t*n-p*m;j[6]=u*n-q*m;j[7]=v*n-r*m;return j};i.SIMD.rotateZ=function(j,k,l){var m=SIMD.Float32x4.splat(Math.sin(l)),n=SIMD.Float32x4.splat(Math.cos(l));if(k!==j){j[8]=k[8];j[9]=k[9];j[10]=k[10];j[11]=k[11];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15]}var o=SIMD.Float32x4.load(k,0),p=SIMD.Float32x4.load(k,4);SIMD.Float32x4.store(j,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(p,m)));SIMD.Float32x4.store(j,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,n),SIMD.Float32x4.mul(o,m)));return j};i.rotateZ=h.USE_SIMD?i.SIMD.rotateZ:i.scalar.rotateZ;i.fromTranslation=function(j,k){j[0]=1;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=1;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=1;j[11]=0;j[12]=k[0];j[13]=k[1];j[14]=k[2];j[15]=1;return j};i.fromScaling=function(j,k){j[0]=k[0];j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=k[1];j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=k[2];j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.fromRotation=function(j,k,l){var m=l[0],n=l[1],o=l[2],p=Math.sqrt(m*m+n*n+o*o),q,r,s;if(Math.abs(p)<h.EPSILON)return null;p=1/p;m*=p;n*=p;o*=p;q=Math.sin(k);r=Math.cos(k);s=1-r;j[0]=m*m*s+r;j[1]=n*m*s+o*q;j[2]=o*m*s-n*q;j[3]=0;j[4]=m*n*s-o*q;j[5]=n*n*s+r;j[6]=o*n*s+m*q;j[7]=0;j[8]=m*o*s+n*q;j[9]=n*o*s-m*q;j[10]=o*o*s+r;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.fromXRotation=function(j,k){var l=Math.sin(k),m=Math.cos(k);j[0]=1;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=m;j[6]=l;j[7]=0;j[8]=0;j[9]=-l;j[10]=m;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.fromYRotation=function(j,k){var l=Math.sin(k),m=Math.cos(k);j[0]=m;j[1]=0;j[2]=-l;j[3]=0;j[4]=0;j[5]=1;j[6]=0;j[7]=0;j[8]=l;j[9]=0;j[10]=m;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.fromZRotation=function(j,k){var l=Math.sin(k),m=Math.cos(k);j[0]=m;j[1]=l;j[2]=0;j[3]=0;j[4]=-l;j[5]=m;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=1;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.fromRotationTranslation=function(j,k,l){var m=k[0],n=k[1],o=k[2],p=k[3],q=m+m,r=n+n,s=o+o,t=m*q,u=m*r,v=m*s,w=n*r,x=n*s,y=o*s,z=p*q,aa=p*r,ba=p*s;j[0]=1-(w+y);j[1]=u+ba;j[2]=v-aa;j[3]=0;j[4]=u-ba;j[5]=1-(t+y);j[6]=x+z;j[7]=0;j[8]=v+aa;j[9]=x-z;j[10]=1-(t+w);j[11]=0;j[12]=l[0];j[13]=l[1];j[14]=l[2];j[15]=1;return j};i.getTranslation=function(j,k){j[0]=k[12];j[1]=k[13];j[2]=k[14];return j};i.getRotation=function(j,k){var l=k[0]+k[5]+k[10],m=0;if(l>0){m=Math.sqrt(l+1)*2;j[3]=.25*m;j[0]=(k[6]-k[9])/m;j[1]=(k[8]-k[2])/m;j[2]=(k[1]-k[4])/m}else if(k[0]>k[5]&k[0]>k[10]){m=Math.sqrt(1+k[0]-k[5]-k[10])*2;j[3]=(k[6]-k[9])/m;j[0]=.25*m;j[1]=(k[1]+k[4])/m;j[2]=(k[8]+k[2])/m}else if(k[5]>k[10]){m=Math.sqrt(1+k[5]-k[0]-k[10])*2;j[3]=(k[8]-k[2])/m;j[0]=(k[1]+k[4])/m;j[1]=.25*m;j[2]=(k[6]+k[9])/m}else{m=Math.sqrt(1+k[10]-k[0]-k[5])*2;j[3]=(k[1]-k[4])/m;j[0]=(k[8]+k[2])/m;j[1]=(k[6]+k[9])/m;j[2]=.25*m}return j};i.fromRotationTranslationScale=function(j,k,l,m){var n=k[0],o=k[1],p=k[2],q=k[3],r=n+n,s=o+o,t=p+p,u=n*r,v=n*s,w=n*t,x=o*s,y=o*t,z=p*t,aa=q*r,ba=q*s,ca=q*t,da=m[0],ea=m[1],fa=m[2];j[0]=(1-(x+z))*da;j[1]=(v+ca)*da;j[2]=(w-ba)*da;j[3]=0;j[4]=(v-ca)*ea;j[5]=(1-(u+z))*ea;j[6]=(y+aa)*ea;j[7]=0;j[8]=(w+ba)*fa;j[9]=(y-aa)*fa;j[10]=(1-(u+x))*fa;j[11]=0;j[12]=l[0];j[13]=l[1];j[14]=l[2];j[15]=1;return j};i.fromRotationTranslationScaleOrigin=function(j,k,l,m,n){var o=k[0],p=k[1],q=k[2],r=k[3],s=o+o,t=p+p,u=q+q,v=o*s,w=o*t,x=o*u,y=p*t,z=p*u,aa=q*u,ba=r*s,ca=r*t,da=r*u,ea=m[0],fa=m[1],ga=m[2],ha=n[0],ia=n[1],ja=n[2];j[0]=(1-(y+aa))*ea;j[1]=(w+da)*ea;j[2]=(x-ca)*ea;j[3]=0;j[4]=(w-da)*fa;j[5]=(1-(v+aa))*fa;j[6]=(z+ba)*fa;j[7]=0;j[8]=(x+ca)*ga;j[9]=(z-ba)*ga;j[10]=(1-(v+y))*ga;j[11]=0;j[12]=l[0]+ha-(j[0]*ha+j[4]*ia+j[8]*ja);j[13]=l[1]+ia-(j[1]*ha+j[5]*ia+j[9]*ja);j[14]=l[2]+ja-(j[2]*ha+j[6]*ia+j[10]*ja);j[15]=1;return j};i.fromQuat=function(j,k){var l=k[0],m=k[1],n=k[2],o=k[3],p=l+l,q=m+m,r=n+n,s=l*p,t=m*p,u=m*q,v=n*p,w=n*q,x=n*r,y=o*p,z=o*q,aa=o*r;j[0]=1-u-x;j[1]=t+aa;j[2]=v-z;j[3]=0;j[4]=t-aa;j[5]=1-s-x;j[6]=w+y;j[7]=0;j[8]=v+z;j[9]=w-y;j[10]=1-s-u;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.frustum=function(j,k,l,m,n,o,p){var q=1/(l-k),r=1/(n-m),s=1/(o-p);j[0]=o*2*q;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=o*2*r;j[6]=0;j[7]=0;j[8]=(l+k)*q;j[9]=(n+m)*r;j[10]=(p+o)*s;j[11]=-1;j[12]=0;j[13]=0;j[14]=p*o*2*s;j[15]=0;return j};i.perspective=function(j,k,l,m,n){var o=1/Math.tan(k/2),p=1/(m-n);j[0]=o/l;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=o;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=(n+m)*p;j[11]=-1;j[12]=0;j[13]=0;j[14]=2*n*m*p;j[15]=0;return j};i.perspectiveFromFieldOfView=function(j,k,l,m){var n=Math.tan(k.upDegrees*Math.PI/180),o=Math.tan(k.downDegrees*Math.PI/180),p=Math.tan(k.leftDegrees*Math.PI/180),q=Math.tan(k.rightDegrees*Math.PI/180),r=2/(p+q),s=2/(n+o);j[0]=r;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=s;j[6]=0;j[7]=0;j[8]=-((p-q)*r*.5);j[9]=(n-o)*s*.5;j[10]=m/(l-m);j[11]=-1;j[12]=0;j[13]=0;j[14]=m*l/(l-m);j[15]=0;return j};i.ortho=function(j,k,l,m,n,o,p){var q=1/(k-l),r=1/(m-n),s=1/(o-p);j[0]=-2*q;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=-2*r;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=2*s;j[11]=0;j[12]=(k+l)*q;j[13]=(n+m)*r;j[14]=(p+o)*s;j[15]=1;return j};i.lookAt=function(j,k,l,m){var n,o,p,q,r,s,t,u,v,w,x=k[0],y=k[1],z=k[2],aa=m[0],ba=m[1],ca=m[2],da=l[0],ea=l[1],fa=l[2];if(Math.abs(x-da)<h.EPSILON&&Math.abs(y-ea)<h.EPSILON&&Math.abs(z-fa)<h.EPSILON)return i.identity(j);t=x-da;u=y-ea;v=z-fa;w=1/Math.sqrt(t*t+u*u+v*v);t*=w;u*=w;v*=w;n=ba*v-ca*u;o=ca*t-aa*v;p=aa*u-ba*t;w=Math.sqrt(n*n+o*o+p*p);if(!w){n=0;o=0;p=0}else{w=1/w;n*=w;o*=w;p*=w}q=u*p-v*o;r=v*n-t*p;s=t*o-u*n;w=Math.sqrt(q*q+r*r+s*s);if(!w){q=0;r=0;s=0}else{w=1/w;q*=w;r*=w;s*=w}j[0]=n;j[1]=q;j[2]=t;j[3]=0;j[4]=o;j[5]=r;j[6]=u;j[7]=0;j[8]=p;j[9]=s;j[10]=v;j[11]=0;j[12]=-(n*x+o*y+p*z);j[13]=-(q*x+r*y+s*z);j[14]=-(t*x+u*y+v*z);j[15]=1;return j};i.str=function(j){return 'mat4('+j[0]+', '+j[1]+', '+j[2]+', '+j[3]+', '+j[4]+', '+j[5]+', '+j[6]+', '+j[7]+', '+j[8]+', '+j[9]+', '+j[10]+', '+j[11]+', '+j[12]+', '+j[13]+', '+j[14]+', '+j[15]+')'};i.frob=function(j){return Math.sqrt(Math.pow(j[0],2)+Math.pow(j[1],2)+Math.pow(j[2],2)+Math.pow(j[3],2)+Math.pow(j[4],2)+Math.pow(j[5],2)+Math.pow(j[6],2)+Math.pow(j[7],2)+Math.pow(j[8],2)+Math.pow(j[9],2)+Math.pow(j[10],2)+Math.pow(j[11],2)+Math.pow(j[12],2)+Math.pow(j[13],2)+Math.pow(j[14],2)+Math.pow(j[15],2))};i.add=function(j,k,l){j[0]=k[0]+l[0];j[1]=k[1]+l[1];j[2]=k[2]+l[2];j[3]=k[3]+l[3];j[4]=k[4]+l[4];j[5]=k[5]+l[5];j[6]=k[6]+l[6];j[7]=k[7]+l[7];j[8]=k[8]+l[8];j[9]=k[9]+l[9];j[10]=k[10]+l[10];j[11]=k[11]+l[11];j[12]=k[12]+l[12];j[13]=k[13]+l[13];j[14]=k[14]+l[14];j[15]=k[15]+l[15];return j};i.subtract=function(j,k,l){j[0]=k[0]-l[0];j[1]=k[1]-l[1];j[2]=k[2]-l[2];j[3]=k[3]-l[3];j[4]=k[4]-l[4];j[5]=k[5]-l[5];j[6]=k[6]-l[6];j[7]=k[7]-l[7];j[8]=k[8]-l[8];j[9]=k[9]-l[9];j[10]=k[10]-l[10];j[11]=k[11]-l[11];j[12]=k[12]-l[12];j[13]=k[13]-l[13];j[14]=k[14]-l[14];j[15]=k[15]-l[15];return j};i.sub=i.subtract;i.multiplyScalar=function(j,k,l){j[0]=k[0]*l;j[1]=k[1]*l;j[2]=k[2]*l;j[3]=k[3]*l;j[4]=k[4]*l;j[5]=k[5]*l;j[6]=k[6]*l;j[7]=k[7]*l;j[8]=k[8]*l;j[9]=k[9]*l;j[10]=k[10]*l;j[11]=k[11]*l;j[12]=k[12]*l;j[13]=k[13]*l;j[14]=k[14]*l;j[15]=k[15]*l;return j};i.multiplyScalarAndAdd=function(j,k,l,m){j[0]=k[0]+l[0]*m;j[1]=k[1]+l[1]*m;j[2]=k[2]+l[2]*m;j[3]=k[3]+l[3]*m;j[4]=k[4]+l[4]*m;j[5]=k[5]+l[5]*m;j[6]=k[6]+l[6]*m;j[7]=k[7]+l[7]*m;j[8]=k[8]+l[8]*m;j[9]=k[9]+l[9]*m;j[10]=k[10]+l[10]*m;j[11]=k[11]+l[11]*m;j[12]=k[12]+l[12]*m;j[13]=k[13]+l[13]*m;j[14]=k[14]+l[14]*m;j[15]=k[15]+l[15]*m;return j};i.exactEquals=function(j,k){return j[0]===k[0]&&j[1]===k[1]&&j[2]===k[2]&&j[3]===k[3]&&j[4]===k[4]&&j[5]===k[5]&&j[6]===k[6]&&j[7]===k[7]&&j[8]===k[8]&&j[9]===k[9]&&j[10]===k[10]&&j[11]===k[11]&&j[12]===k[12]&&j[13]===k[13]&&j[14]===k[14]&&j[15]===k[15]};i.equals=function(j,k){var l=j[0],m=j[1],n=j[2],o=j[3],p=j[4],q=j[5],r=j[6],s=j[7],t=j[8],u=j[9],v=j[10],w=j[11],x=j[12],y=j[13],z=j[14],aa=j[15],ba=k[0],ca=k[1],da=k[2],ea=k[3],fa=k[4],ga=k[5],ha=k[6],ia=k[7],ja=k[8],ka=k[9],la=k[10],ma=k[11],na=k[12],oa=k[13],pa=k[14],qa=k[15];return Math.abs(l-ba)<=h.EPSILON*Math.max(1,Math.abs(l),Math.abs(ba))&&Math.abs(m-ca)<=h.EPSILON*Math.max(1,Math.abs(m),Math.abs(ca))&&Math.abs(n-da)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(da))&&Math.abs(o-ea)<=h.EPSILON*Math.max(1,Math.abs(o),Math.abs(ea))&&Math.abs(p-fa)<=h.EPSILON*Math.max(1,Math.abs(p),Math.abs(fa))&&Math.abs(q-ga)<=h.EPSILON*Math.max(1,Math.abs(q),Math.abs(ga))&&Math.abs(r-ha)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(ha))&&Math.abs(s-ia)<=h.EPSILON*Math.max(1,Math.abs(s),Math.abs(ia))&&Math.abs(t-ja)<=h.EPSILON*Math.max(1,Math.abs(t),Math.abs(ja))&&Math.abs(u-ka)<=h.EPSILON*Math.max(1,Math.abs(u),Math.abs(ka))&&Math.abs(v-la)<=h.EPSILON*Math.max(1,Math.abs(v),Math.abs(la))&&Math.abs(w-ma)<=h.EPSILON*Math.max(1,Math.abs(w),Math.abs(ma))&&Math.abs(x-na)<=h.EPSILON*Math.max(1,Math.abs(x),Math.abs(na))&&Math.abs(y-oa)<=h.EPSILON*Math.max(1,Math.abs(y),Math.abs(oa))&&Math.abs(z-pa)<=h.EPSILON*Math.max(1,Math.abs(z),Math.abs(pa))&&Math.abs(aa-qa)<=h.EPSILON*Math.max(1,Math.abs(aa),Math.abs(qa))};f.exports=i}),null);
__d("gl-matrix-vec3",["gl-matrix-common"],(function a(b,c,d,e,f,g){var h=c("gl-matrix-common"),i={};i.create=function(){var j=new h.ARRAY_TYPE(3);j[0]=0;j[1]=0;j[2]=0;return j};i.clone=function(j){var k=new h.ARRAY_TYPE(3);k[0]=j[0];k[1]=j[1];k[2]=j[2];return k};i.fromValues=function(j,k,l){var m=new h.ARRAY_TYPE(3);m[0]=j;m[1]=k;m[2]=l;return m};i.copy=function(j,k){j[0]=k[0];j[1]=k[1];j[2]=k[2];return j};i.set=function(j,k,l,m){j[0]=k;j[1]=l;j[2]=m;return j};i.add=function(j,k,l){j[0]=k[0]+l[0];j[1]=k[1]+l[1];j[2]=k[2]+l[2];return j};i.subtract=function(j,k,l){j[0]=k[0]-l[0];j[1]=k[1]-l[1];j[2]=k[2]-l[2];return j};i.sub=i.subtract;i.multiply=function(j,k,l){j[0]=k[0]*l[0];j[1]=k[1]*l[1];j[2]=k[2]*l[2];return j};i.mul=i.multiply;i.divide=function(j,k,l){j[0]=k[0]/l[0];j[1]=k[1]/l[1];j[2]=k[2]/l[2];return j};i.div=i.divide;i.ceil=function(j,k){j[0]=Math.ceil(k[0]);j[1]=Math.ceil(k[1]);j[2]=Math.ceil(k[2]);return j};i.floor=function(j,k){j[0]=Math.floor(k[0]);j[1]=Math.floor(k[1]);j[2]=Math.floor(k[2]);return j};i.min=function(j,k,l){j[0]=Math.min(k[0],l[0]);j[1]=Math.min(k[1],l[1]);j[2]=Math.min(k[2],l[2]);return j};i.max=function(j,k,l){j[0]=Math.max(k[0],l[0]);j[1]=Math.max(k[1],l[1]);j[2]=Math.max(k[2],l[2]);return j};i.round=function(j,k){j[0]=Math.round(k[0]);j[1]=Math.round(k[1]);j[2]=Math.round(k[2]);return j};i.scale=function(j,k,l){j[0]=k[0]*l;j[1]=k[1]*l;j[2]=k[2]*l;return j};i.scaleAndAdd=function(j,k,l,m){j[0]=k[0]+l[0]*m;j[1]=k[1]+l[1]*m;j[2]=k[2]+l[2]*m;return j};i.distance=function(j,k){var l=k[0]-j[0],m=k[1]-j[1],n=k[2]-j[2];return Math.sqrt(l*l+m*m+n*n)};i.dist=i.distance;i.squaredDistance=function(j,k){var l=k[0]-j[0],m=k[1]-j[1],n=k[2]-j[2];return l*l+m*m+n*n};i.sqrDist=i.squaredDistance;i.length=function(j){var k=j[0],l=j[1],m=j[2];return Math.sqrt(k*k+l*l+m*m)};i.len=i.length;i.squaredLength=function(j){var k=j[0],l=j[1],m=j[2];return k*k+l*l+m*m};i.sqrLen=i.squaredLength;i.negate=function(j,k){j[0]=-k[0];j[1]=-k[1];j[2]=-k[2];return j};i.inverse=function(j,k){j[0]=1/k[0];j[1]=1/k[1];j[2]=1/k[2];return j};i.normalize=function(j,k){var l=k[0],m=k[1],n=k[2],o=l*l+m*m+n*n;if(o>0){o=1/Math.sqrt(o);j[0]=k[0]*o;j[1]=k[1]*o;j[2]=k[2]*o}return j};i.dot=function(j,k){return j[0]*k[0]+j[1]*k[1]+j[2]*k[2]};i.cross=function(j,k,l){var m=k[0],n=k[1],o=k[2],p=l[0],q=l[1],r=l[2];j[0]=n*r-o*q;j[1]=o*p-m*r;j[2]=m*q-n*p;return j};i.lerp=function(j,k,l,m){var n=k[0],o=k[1],p=k[2];j[0]=n+m*(l[0]-n);j[1]=o+m*(l[1]-o);j[2]=p+m*(l[2]-p);return j};i.hermite=function(j,k,l,m,n,o){var p=o*o,q=p*(2*o-3)+1,r=p*(o-2)+o,s=p*(o-1),t=p*(3-2*o);j[0]=k[0]*q+l[0]*r+m[0]*s+n[0]*t;j[1]=k[1]*q+l[1]*r+m[1]*s+n[1]*t;j[2]=k[2]*q+l[2]*r+m[2]*s+n[2]*t;return j};i.bezier=function(j,k,l,m,n,o){var p=1-o,q=p*p,r=o*o,s=q*p,t=3*o*q,u=3*r*p,v=r*o;j[0]=k[0]*s+l[0]*t+m[0]*u+n[0]*v;j[1]=k[1]*s+l[1]*t+m[1]*u+n[1]*v;j[2]=k[2]*s+l[2]*t+m[2]*u+n[2]*v;return j};i.random=function(j,k){k=k||1;var l=h.RANDOM()*2*Math.PI,m=h.RANDOM()*2-1,n=Math.sqrt(1-m*m)*k;j[0]=Math.cos(l)*n;j[1]=Math.sin(l)*n;j[2]=m*k;return j};i.transformMat4=function(j,k,l){var m=k[0],n=k[1],o=k[2],p=l[3]*m+l[7]*n+l[11]*o+l[15];p=p||1;j[0]=(l[0]*m+l[4]*n+l[8]*o+l[12])/p;j[1]=(l[1]*m+l[5]*n+l[9]*o+l[13])/p;j[2]=(l[2]*m+l[6]*n+l[10]*o+l[14])/p;return j};i.transformMat3=function(j,k,l){var m=k[0],n=k[1],o=k[2];j[0]=m*l[0]+n*l[3]+o*l[6];j[1]=m*l[1]+n*l[4]+o*l[7];j[2]=m*l[2]+n*l[5]+o*l[8];return j};i.transformQuat=function(j,k,l){var m=k[0],n=k[1],o=k[2],p=l[0],q=l[1],r=l[2],s=l[3],t=s*m+q*o-r*n,u=s*n+r*m-p*o,v=s*o+p*n-q*m,w=-p*m-q*n-r*o;j[0]=t*s+w*-p+u*-r-v*-q;j[1]=u*s+w*-q+v*-p-t*-r;j[2]=v*s+w*-r+t*-q-u*-p;return j};i.rotateX=function(j,k,l,m){var n=[],o=[];n[0]=k[0]-l[0];n[1]=k[1]-l[1];n[2]=k[2]-l[2];o[0]=n[0];o[1]=n[1]*Math.cos(m)-n[2]*Math.sin(m);o[2]=n[1]*Math.sin(m)+n[2]*Math.cos(m);j[0]=o[0]+l[0];j[1]=o[1]+l[1];j[2]=o[2]+l[2];return j};i.rotateY=function(j,k,l,m){var n=[],o=[];n[0]=k[0]-l[0];n[1]=k[1]-l[1];n[2]=k[2]-l[2];o[0]=n[2]*Math.sin(m)+n[0]*Math.cos(m);o[1]=n[1];o[2]=n[2]*Math.cos(m)-n[0]*Math.sin(m);j[0]=o[0]+l[0];j[1]=o[1]+l[1];j[2]=o[2]+l[2];return j};i.rotateZ=function(j,k,l,m){var n=[],o=[];n[0]=k[0]-l[0];n[1]=k[1]-l[1];n[2]=k[2]-l[2];o[0]=n[0]*Math.cos(m)-n[1]*Math.sin(m);o[1]=n[0]*Math.sin(m)+n[1]*Math.cos(m);o[2]=n[2];j[0]=o[0]+l[0];j[1]=o[1]+l[1];j[2]=o[2]+l[2];return j};i.forEach=function(){var j=i.create();return function(k,l,m,n,o,p){var q,r;if(!l)l=3;if(!m)m=0;if(n){r=Math.min(n*l+m,k.length)}else r=k.length;for(q=m;q<r;q+=l){j[0]=k[q];j[1]=k[q+1];j[2]=k[q+2];o(j,j,p);k[q]=j[0];k[q+1]=j[1];k[q+2]=j[2]}return k}}();i.angle=function(j,k){var l=i.fromValues(j[0],j[1],j[2]),m=i.fromValues(k[0],k[1],k[2]);i.normalize(l,l);i.normalize(m,m);var n=i.dot(l,m);if(n>1){return 0}else return Math.acos(n);};i.str=function(j){return 'vec3('+j[0]+', '+j[1]+', '+j[2]+')'};i.exactEquals=function(j,k){return j[0]===k[0]&&j[1]===k[1]&&j[2]===k[2]};i.equals=function(j,k){var l=j[0],m=j[1],n=j[2],o=k[0],p=k[1],q=k[2];return Math.abs(l-o)<=h.EPSILON*Math.max(1,Math.abs(l),Math.abs(o))&&Math.abs(m-p)<=h.EPSILON*Math.max(1,Math.abs(m),Math.abs(p))&&Math.abs(n-q)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(q))};f.exports=i}),null);
__d("GLMatrix",["gl-matrix-common","gl-matrix-mat4","gl-matrix-vec3"],(function a(b,c,d,e,f,g){g.glMatrix=c("gl-matrix-common");g.mat4=c("gl-matrix-mat4");g.vec3=c("gl-matrix-vec3")}),null);
__d('getErrorNameFromWebGLErrorCode',[],(function a(b,c,d,e,f,g){var h={'0':'NO_ERROR','1280':'INVALID_ENUM','1281':'INVALID_VALUE','1282':'INVALID_OPERATION','1285':'OUT_OF_MEMORY','1286':'INVALID_FRAMEBUFFER_OPERATION','37442':'CONTEXT_LOST_WEBGL'};function i(j){if(!(j in h))return 'UNKNOWN_ERROR';return h[j]}f.exports=i}),null);
__d('radToDeg',[],(function a(b,c,d,e,f,g){'use strict';function h(i){return i*180/Math.PI}f.exports=h}),null);
__d('BaseRotatableWebGLRenderer',['EventEmitter','EventListener','GLMatrix','Map','getErrorNameFromWebGLErrorCode','performanceNow','radToDeg'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('GLMatrix').glMatrix,k=c('GLMatrix').mat4,l=Math.max(window.devicePixelRatio||1,1),m=179;h=babelHelpers.inherits(n,c('EventEmitter'));i=h&&h.prototype;function n(o){i.constructor.call(this);this.__handleContextLost=function(q){q.preventDefault();this.emit('renderingContextLost');this.__contextLost=true}.bind(this);this.__handleContextRestore=function(q){this.__setup();this.emit('renderingContextRestore')}.bind(this);if(!this.constructor.__subClassMethods)throw new Error('Must implement "static __subClassMethods"');for(var p in this.constructor.__subClassMethods)if(typeof this[p]!=='function')throw new Error('Must implement "'+p+'"');this.__firstRenderTime=-1;this.__previousRenderFinishTime=-1;this.__sumOfRenderTimes=0;this.__framesRenderedCount=0;this.__sumTextureScreenRatioValues=0;this.__textureScreenRatioMillisCounted=0;this.__canvas=o;this.__aspectRatio=this.__canvas.width/this.__canvas.height||1;this.__shaders=[];this.__contextLost=false;this.__horizontalFieldOfView=0;this.__verticalFieldOfView=0;this.__perspectiveMatrix=k.create();this.__rotationMatrix=k.create();this.__shouldEnableBlend=false;this.__useVfovAsIs=false;this.__canvas.addEventListener('webglcontextlost',this.__handleContextLost);this.__canvas.addEventListener('webglcontextrestored',this.__handleContextRestore)}n.prototype.destroy=function(){this.__canvas.removeEventListener('webglcontextlost',this.__handleContextLost);this.__canvas.removeEventListener('webglcontextrestored',this.__handleContextRestore);this.__shaders.forEach(function(o){try{this.__gl.detachShader(this.__shaderProgram,o)}catch(p){}}.bind(this));this.__shaders=[];this.__clearCache();this.__destroyed=true};n.prototype.updateFieldOfView=function(o){var p=Math.min(o,m/this.__aspectRatio);if(this.__useVfovAsIs)p=o;var q=Math.min(m,p);this.__verticalFieldOfView=q;this.__updateHorizontalFieldOfView();this.__updatePerspective()};n.prototype.updateViewportDimensions=function(o,p){this.__canvas.width=o*l;this.__canvas.height=p*l;this.__aspectRatio=this.__canvas.width/this.__canvas.height||1;this.__updateHorizontalFieldOfView();this.__updatePerspective()};n.prototype.hasRenderingContext=function(){return !this.__contextLost};n.prototype.getScreenshotDataURL=function(o,p,q){if(!this.__gl||this.__contextLost)return '';this.render(o);return this.__canvas.toDataURL(p,q)};n.prototype.getAverageFrameRenderTimeMillis=function(){if(this.__framesRenderedCount===0)return 0;return this.__sumOfRenderTimes/this.__framesRenderedCount};n.prototype.getMaxGPUMemoryUsedBytes=function(){return this.__getMaxGPUMemoryUsedBytes()};n.prototype.getAverageTextureToScreenPixelRatio=function(){if(this.__textureScreenRatioMillisCounted===0)return 0;return this.__sumTextureScreenRatioValues/this.__textureScreenRatioMillisCounted};n.prototype.getTimeSinceFirstRenderMillis=function(){return c('performanceNow')()-this.__firstRenderTime};n.prototype.renderErrorCheck=function(){this.__createTexture()};n.prototype.render=function(o){if(this.__contextLost||this.__destroyed)return;this.__view=o;if(!this.__isValidView(o)){this.emit('renderingError',new Error('invalid view'),o);return}var p=c('performanceNow')();if(this.__firstRenderTime===-1)this.__firstRenderTime=p;if(o.fov!==this.__verticalFieldOfView)this.updateFieldOfView(o.fov);k.identity(this.__rotationMatrix);k.rotateX(this.__rotationMatrix,this.__rotationMatrix,-j.toRadian(o.pitch));k.rotateY(this.__rotationMatrix,this.__rotationMatrix,j.toRadian(o.yaw));this.__gl.uniformMatrix4fv(this.__shaderRotMatrixUniform,false,this.__rotationMatrix);this.__gl.uniformMatrix4fv(this.__shaderPMatrixUniform,false,this.__perspectiveMatrix);var q=this.__getPrevFrameTextureScreenRatio();this.__renderInternal();var r=c('performanceNow')();this.__sumOfRenderTimes+=r-p;this.__framesRenderedCount+=1;if(this.__previousRenderFinishTime>0){var s=2000,t=Math.min(r-this.__previousRenderFinishTime,s);this.__sumTextureScreenRatioValues+=t*q;this.__textureScreenRatioMillisCounted+=t}this.__previousRenderFinishTime=r};n.prototype.renderWithRotationMatrixForMSite=function(o){k.rotateX(o,o,j.toRadian(90));this.renderWithRotationMatrix(o)};n.prototype.renderWithRotationMatrix=function(o){if(this.__contextLost)return;this.__rotationMatrix=o;this.__gl.uniformMatrix4fv(this.__shaderRotMatrixUniform,false,this.__rotationMatrix);this.__gl.uniformMatrix4fv(this.__shaderPMatrixUniform,false,this.__perspectiveMatrix);this.__renderInternal()};n.prototype.__isValidView=function(o){return !Number.isNaN(o.fov+o.pitch+o.yaw)};n.prototype.__copyTextureToGLBuffer=function(o,p){var q=arguments.length<=2||arguments[2]===undefined?false:arguments[2],r=this.__getNewGLTexObj(p);this.__gl.pixelStorei(this.__gl.UNPACK_FLIP_Y_WEBGL,q);this.__gl.bindTexture(this.__gl.TEXTURE_2D,r);this.__gl.texImage2D(this.__gl.TEXTURE_2D,0,this.__gl.RGBA,this.__gl.RGBA,this.__gl.UNSIGNED_BYTE,o.image);var s=this.__gl.getError();if(s!==0)this.__emitRenderingError(s);return r};n.prototype.__setup=function(){if(!this.__gl||!this.__contextLost){this.__gl=this.__getGL();this.__contextLost=false}this.__gl.clearColor(0,0,0,1);if(this.__shouldEnableBlend){this.__gl.enable(this.__gl.BLEND);this.__gl.blendFunc(this.__gl.SRC_ALPHA,this.__gl.ONE_MINUS_SRC_ALPHA)}this.updateViewportDimensions(this.__canvas.clientWidth,this.__canvas.clientHeight);var o=this.__initShaders();if(!o.success){var p=c('getErrorNameFromWebGLErrorCode')(this.__gl.getError());throw new Error('\n        Failed to intialize shaders: '+p+'\n        Error Message: '+o.error+'\n      ')}};n.prototype.__getGL=function(){if(this.__gl&&!this.__contextLost)return this.__gl;if(!b.WebGLRenderingContext)throw new Error('WebGLRenderingContext not available.');var o=['webgl','experimental-webgl','webkit-3d','moz-webgl'],p=null,q=null,r=c('EventListener').listen(this.__canvas,'webglcontextcreationerror',function(t){return q=t.statusMessage});for(var s=0;s<o.length;s++){try{p=this.__canvas.getContext(o[s])}catch(t){}if(p)break;}r.remove();if(!p){q=q||'Unknown error.';throw new Error('Failed to acquire 3D rendering context: '+q)}return p};n.prototype.__updatePerspective=function(){k.perspective(this.__perspectiveMatrix,j.toRadian(this.__verticalFieldOfView),this.__aspectRatio,.1,100);this.__gl.viewport(0,0,this.__gl.drawingBufferWidth,this.__gl.drawingBufferHeight)};n.prototype.__initShaders=function(){this.__shaderProgram=this.__gl.createProgram();try{this.__attachShaders(this.__shaderProgram)}catch(p){return {success:false,error:'Shader: '+p.message}}this.__gl.linkProgram(this.__shaderProgram);var o=this.__gl.getProgramParameter(this.__shaderProgram,this.__gl.LINK_STATUS);if(!o)return {success:false,error:'No link. Could not initialize shaders'};this.__gl.useProgram(this.__shaderProgram);this.__setShaderMatrixPointers();this.__shaderProgramReady();return {success:true,error:''}};n.prototype.__setShaderMatrixPointers=function(){this.__shaderPMatrixUniform=this.__gl.getUniformLocation(this.__shaderProgram,this.__getShaderPerspectiveMatrixUniformName());this.__shaderRotMatrixUniform=this.__gl.getUniformLocation(this.__shaderProgram,this.__getShaderRotationMatrixUniformName())};n.prototype.__getShaderConfigs=function(){var o=new (c('Map'))();o.set(this.__gl.VERTEX_SHADER,this.__getVertexShaderScript());o.set(this.__gl.FRAGMENT_SHADER,this.__getFragmentShaderScript());return o};n.prototype.__attachShaders=function(o){var p=this.__getShaderConfigs();p.forEach(function(q,r){var s=this.__gl.createShader(r);this.__gl.shaderSource(s,q);this.__gl.compileShader(s);if(!this.__gl.getShaderParameter(s,this.__gl.COMPILE_STATUS))throw new Error(this.__gl.getShaderInfoLog(s));this.__gl.attachShader(o,s);this.__shaders.push(s)}.bind(this))};n.prototype.__getNewGLTexObj=function(o){var p=this.__gl.createTexture();this.__gl.bindTexture(o,p);this.__gl.texParameteri(o,this.__gl.TEXTURE_MAG_FILTER,this.__gl.LINEAR);this.__gl.texParameteri(o,this.__gl.TEXTURE_MIN_FILTER,this.__gl.LINEAR);this.__gl.texParameteri(o,this.__gl.TEXTURE_WRAP_S,this.__gl.CLAMP_TO_EDGE);this.__gl.texParameteri(o,this.__gl.TEXTURE_WRAP_T,this.__gl.CLAMP_TO_EDGE);this.__gl.bindTexture(o,null);return p};n.prototype.__updateHorizontalFieldOfView=function(){var o=j.toRadian(this.__verticalFieldOfView),p=2*Math.atan(Math.tan(o/2)*this.__aspectRatio);this.__horizontalFieldOfView=c('radToDeg')(p)};n.prototype.__emitRenderingError=function(o){this.emit('renderingError',new Error('WebGL Error Code: '+o))};f.exports=n}),null);
__d('CubemapImageTileInfo',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){this.level=i;this.face=j;this.col=k;this.row=l}h.prototype.getKey=function(){return ''+this.level+'_'+this.face+'_'+this.col+'_'+this.row};h.prototype.getInfoForOffsetLevel=function(i){var j=this.level-i;if(j<0)throw new Error('Invalid level offset for getKeyForOffsetLevel: '+i+', max offset: '+this.level);var k=Math.floor(this.col/Math.pow(2,i)),l=Math.floor(this.row/Math.pow(2,i));return new h(j,this.face,k,l)};f.exports=h}),null);
__d('TileRendererState',['CubemapImageTileInfo'],(function a(b,c,d,e,f,g){'use strict';var h=1000,i=1000;function j(k,l){this.tileInfo=k;this.blendingProgress=0;this.closestCoveringTile=l;this.closestPrevTile=l;this.durationInViewMS=0;this.isInView=true}j.prototype.enterView=function(k){this.blendingProgress=1;this.closestCoveringTile=k;this.closestPrevTile=k;this.durationInViewMS=0;this.isInView=true};j.prototype.exitView=function(){this.closestCoveringTile=null;this.closestPrevTile=null;this.isInView=false};j.prototype.shouldFetch=function(k){return this.durationInViewMS<h&&this.durationInViewMS+k>=h};j.prototype.update=function(k,l){this.updateBlendingProgress(k,l);this.durationInViewMS+=k};j.prototype.updateBlendingProgress=function(k,l){if(!l||!this.closestCoveringTile)return;var m=l.level-this.closestCoveringTile.level;if(m>0){this.closestCoveringTile=l;this.blendingProgress=this.blendingProgress>=1?0:this.blendingProgress/(1*Math.pow(2,m))}if(this.blendingProgress<1)this.blendingProgress=Math.min(this.blendingProgress+1*k/i,1);};f.exports=j}),null);
__d('TiledSphericalRenderer',['BaseRotatableWebGLRenderer','CubemapImageTileInfo','GLMatrix','Map','SphericalMediaConstants','TileRendererState','debounceCore','performanceNow','throttle'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('GLMatrix').glMatrix,k=c('GLMatrix').mat4,l=c('GLMatrix').vec3,m=c('SphericalMediaConstants').TILED_CUBE_FACES,n=44;h=babelHelpers.inherits(o,c('BaseRotatableWebGLRenderer'));i=h&&h.prototype;function o(p,q,r,s){i.constructor.call(this,p);this.$TiledSphericalRenderer43=function(t,u){var v=t.getInfo().getKey();this.$TiledSphericalRenderer7.set(v,t);if(u!==this.$TiledSphericalRenderer10){this.$TiledSphericalRenderer10=this.$TiledSphericalRenderer8;setTimeout(this.$TiledSphericalRenderer44,0)}}.bind(this);this.$TiledSphericalRenderer45=c('debounceCore')(function(){return this.__renderInternal()}.bind(this),30);this.$TiledSphericalRenderer35=c('throttle')(function(){return this.__renderInternal()}.bind(this),100);this.$TiledSphericalRenderer48=c('debounceCore')(function(){var t=this.$TiledSphericalRenderer7;this.$TiledSphericalRenderer7=new (c('Map'))();this.$TiledSphericalRenderer31();this.$TiledSphericalRenderer12.forEach(function(u){return setTimeout(function(){return this.$TiledSphericalRenderer46(u,t)}.bind(this),0)}.bind(this))}.bind(this),100);this.$TiledSphericalRenderer44=c('throttle')(function(){var t=this.$TiledSphericalRenderer7;this.$TiledSphericalRenderer7=new (c('Map'))();this.$TiledSphericalRenderer31();this.$TiledSphericalRenderer12.forEach(function(u){return setTimeout(function(){return this.$TiledSphericalRenderer46(u,t)}.bind(this),0)}.bind(this))}.bind(this),100);this.$TiledSphericalRenderer1=q;this.$TiledSphericalRenderer2=r;this.$TiledSphericalRenderer3=1;this.$TiledSphericalRenderer6=0;this.$TiledSphericalRenderer8=-1;this.$TiledSphericalRenderer9=-1;this.$TiledSphericalRenderer10=0;this.$TiledSphericalRenderer4=new (c('Map'))();this.$TiledSphericalRenderer5=new (c('Map'))();this.$TiledSphericalRenderer7=new (c('Map'))();this.$TiledSphericalRenderer11=[];this.$TiledSphericalRenderer12=[];this.$TiledSphericalRenderer13=new (c('Map'))();this.$TiledSphericalRenderer14=[];this.$TiledSphericalRenderer15=new (c('Map'))();this.$TiledSphericalRenderer16=0;this.$TiledSphericalRenderer26();this.__setup()}o.prototype.__clearCache=function(){this.$TiledSphericalRenderer27();this.$TiledSphericalRenderer14=[];this.$TiledSphericalRenderer5.forEach(function(p){this.__gl.deleteTexture(p)}.bind(this));this.$TiledSphericalRenderer5.clear();this.$TiledSphericalRenderer4.forEach(function(p){this.__gl.deleteTexture(p.texture)}.bind(this));this.$TiledSphericalRenderer4.clear();this.$TiledSphericalRenderer15.clear()};o.prototype.__getShaderPerspectiveMatrixUniformName=function(){return 'uPMatrix'};o.prototype.__getShaderRotationMatrixUniformName=function(){return 'uRotationMatrix'};o.prototype.__shaderProgramReady=function(){this.$TiledSphericalRenderer19=this.__gl.getAttribLocation(this.__shaderProgram,'aVertexPosition');this.__gl.enableVertexAttribArray(this.$TiledSphericalRenderer19);this.$TiledSphericalRenderer20=this.__gl.getAttribLocation(this.__shaderProgram,'aTextureCoord');this.__gl.enableVertexAttribArray(this.$TiledSphericalRenderer20);this.$TiledSphericalRenderer21=this.__gl.getAttribLocation(this.__shaderProgram,'aBGTextureCoord');this.__gl.enableVertexAttribArray(this.$TiledSphericalRenderer21);var p=this.__gl.getUniformLocation(this.__shaderProgram,'uContentSampler'),q=this.__gl.getUniformLocation(this.__shaderProgram,'uBackgroundSampler'),r=0;this.$TiledSphericalRenderer23=this.__gl.TEXTURE0;var s=1;this.$TiledSphericalRenderer24=this.__gl.TEXTURE1;this.__gl.uniform1i(p,r);this.__gl.uniform1i(q,s);this.$TiledSphericalRenderer22=this.__gl.getAttribLocation(this.__shaderProgram,'aPrevLevelTextureCoord');this.__gl.enableVertexAttribArray(this.$TiledSphericalRenderer22);var t=this.__gl.getUniformLocation(this.__shaderProgram,'uPrevLevelSampler'),u=2;this.$TiledSphericalRenderer25=this.__gl.TEXTURE2;this.__gl.uniform1i(t,u);this.$TiledSphericalRenderer28()};o.prototype.__getVertexShaderScript=function(){return '\n      attribute vec3 aVertexPosition;\n      attribute vec2 aTextureCoord;\n      attribute vec2 aBGTextureCoord;\n      attribute vec2 aPrevLevelTextureCoord;\n\n      uniform mat4 uRotationMatrix;\n      uniform mat4 uPMatrix;\n\n      varying highp vec3 vCurrentRay;\n      varying highp vec2 vTextureCoord;\n      varying highp vec2 vBGTextureCoord;\n      varying highp vec2 vPrevLevelTextureCoord;\n\n      void main(void) {\n        gl_Position = uPMatrix * uRotationMatrix * vec4(aVertexPosition, 1.0);\n        vCurrentRay = aVertexPosition;\n        vTextureCoord = aTextureCoord;\n        vBGTextureCoord = aBGTextureCoord;\n        vPrevLevelTextureCoord = aPrevLevelTextureCoord;\n      }\n    '};o.prototype.__getFragmentShaderScript=function(){return '\n      #define PI 3.1415926538\n\n      precision highp float;\n      // 1 degree blend zone\n      const highp float blendDist = PI / 180.0;\n\n      varying highp vec2 vTextureCoord;\n      varying highp vec2 vBGTextureCoord;\n      varying highp vec2 vPrevLevelTextureCoord;\n\n      varying highp vec3 vCurrentRay;\n      uniform highp vec2 uHorizontalAngleBounds;\n      uniform highp vec2 uVerticleAngleBounds;\n\n      uniform sampler2D uContentSampler;\n      uniform sampler2D uBackgroundSampler;\n      uniform sampler2D uPrevLevelSampler;\n\n      uniform float progress;\n\n      void main(void) {\n        highp float x = vCurrentRay[0];\n        highp float y = vCurrentRay[1];\n        highp float z = vCurrentRay[2];\n        highp float hAngle = atan(x, -1.0 * z);\n        highp float vAngle = atan(y * inversesqrt(x*x + z*z));\n\n        // if current ray is inside the content bounds, use the content sampler\n        // to set the fragment color. if it is not within the bounds, use the\n        // background sampler to set the color.*\n\n        highp float hdist = 0.0;\n        highp float vdist = 0.0;\n        if (hAngle < uHorizontalAngleBounds[0]) {\n          hdist = uHorizontalAngleBounds[0] - hAngle;\n        } else if (hAngle > uHorizontalAngleBounds[1]) {\n          hdist = hAngle - uHorizontalAngleBounds[1];\n        }\n        if (vAngle < uVerticleAngleBounds[0]) {\n          vdist = uVerticleAngleBounds[0] - vAngle;\n        } else if (vAngle > uVerticleAngleBounds[1]) {\n          vdist = vAngle - uVerticleAngleBounds[1];\n        }\n        highp float maxDist = max(hdist, vdist);\n        highp vec4 bgColor = texture2D(\n          uBackgroundSampler,\n          vec2(vBGTextureCoord.s, vBGTextureCoord.t)\n        );\n        highp vec4 contentColor = texture2D(\n          uContentSampler,\n          vec2(vTextureCoord.s, vTextureCoord.t)\n        );\n        if (maxDist > 0.0) {\n          // Inside this condition, our fragment is outside the content bounds.\n          // The distance outside the bound is represented by maxDist. It could\n          // be the horizontal or vertical distance from a bound, whichever is\n          // larger. We will use this distance to blend the content with the\n          // background, if the distance is smaller than blendDist. If it is\n          // larger than blendDist, we will use purely the background tex to\n          // set the color. If dist is within the blendDist, then we will set\n          // the color to the linearly weighted avg across the blend zone of the\n          // background and content colors.\n          //\n          if (maxDist < blendDist) {\n            highp float contentWeight = (blendDist - maxDist) / blendDist;\n            gl_FragColor = mix(bgColor, contentColor, contentWeight);\n          } else {\n            // We are outside the blend zone. Just use background.\n            gl_FragColor = bgColor;\n          }\n        } else {\n          // In this condition, we are inside the content\n          highp vec4 prevLevelColor = texture2D(\n            uPrevLevelSampler,\n            vec2(vPrevLevelTextureCoord.s, vPrevLevelTextureCoord.t)\n          );\n          gl_FragColor = mix(prevLevelColor, contentColor, progress);\n        }\n      }\n      '};o.prototype.__getMaxGPUMemoryUsedBytes=function(){var p=this.$TiledSphericalRenderer1.getTileTotalSize(),q=4,r=this.$TiledSphericalRenderer4.size+this.$TiledSphericalRenderer5.size;return p*p*q*r};o.prototype.__getPrevFrameTextureScreenRatio=function(){return this.$TiledSphericalRenderer6};o.prototype.__createTexture=function(){if(this.$TiledSphericalRenderer5.size===0&&this.$TiledSphericalRenderer1.isBaseLevelReady())this.$TiledSphericalRenderer29();if(this.$TiledSphericalRenderer4.size===0&&this.$TiledSphericalRenderer1.isViewportReady())this.$TiledSphericalRenderer30();};o.prototype.__renderInternal=function(){if(this.__destroyed||!this.$TiledSphericalRenderer1.isBaseLevelReady()&&!this.$TiledSphericalRenderer1.isViewportReady())return;this.__createTexture();this.$TiledSphericalRenderer9=this.$TiledSphericalRenderer8!=-1?this.$TiledSphericalRenderer8:c('performanceNow')();this.$TiledSphericalRenderer8=c('performanceNow')();this.$TiledSphericalRenderer31();this.$TiledSphericalRenderer32();var p=0,q=false;this.$TiledSphericalRenderer12.forEach(function(s){var t=this.$TiledSphericalRenderer15.get(s.getKey()),u=t?t.blendingProgress:0;if(u<1)q=true;p+=this.$TiledSphericalRenderer33(s)}.bind(this));var r=this.$TiledSphericalRenderer12.length>0?this.$TiledSphericalRenderer12.length:1;p/=r;this.$TiledSphericalRenderer6=p;if(q){this.$TiledSphericalRenderer34()}else this.$TiledSphericalRenderer27();};o.prototype.$TiledSphericalRenderer34=function(){if(this.$TiledSphericalRenderer16===0)this.$TiledSphericalRenderer16=setInterval(function(){return this.$TiledSphericalRenderer35()}.bind(this),200);};o.prototype.$TiledSphericalRenderer27=function(){if(this.$TiledSphericalRenderer16!==0){clearInterval(this.$TiledSphericalRenderer16);this.$TiledSphericalRenderer16=0}};o.prototype.$TiledSphericalRenderer28=function(){var p=this.__gl.getUniformLocation(this.__shaderProgram,'uHorizontalAngleBounds'),q=this.__gl.getUniformLocation(this.__shaderProgram,'uVerticleAngleBounds'),r=this.$TiledSphericalRenderer2.partialLeftDegrees,s=this.$TiledSphericalRenderer2.partialRightDegrees,t=this.$TiledSphericalRenderer2.partialTopDegrees,u=this.$TiledSphericalRenderer2.partialBottomDegrees,v=r!==undefined&&r!==null?-1*r:-181,w=s!==undefined&&s!==null?s:181,x=u!==undefined&&u!==null?-1*u:-91,y=t!==undefined&&t!==null?t:91,z=new Float32Array([j.toRadian(v),j.toRadian(w)]),aa=new Float32Array([j.toRadian(x),j.toRadian(y)]);this.__gl.uniform2fv(p,z);this.__gl.uniform2fv(q,aa)};o.prototype.$TiledSphericalRenderer31=function(){this.$TiledSphericalRenderer12=[];this.$TiledSphericalRenderer13.clear();var p=this.$TiledSphericalRenderer36(),q=this.$TiledSphericalRenderer37(),r=Math.pow(2,p),s=2*this.$TiledSphericalRenderer3/r;for(var t=0;t<q.length;t++){var u=q[t];if(u){var v=Math.floor(u.minX/s),w=Math.min(Math.floor(u.maxX/s),r-1),x=Math.floor(u.minY/s),y=Math.min(Math.floor(u.maxY/s),r-1);for(var z=v;z<=w;z++)for(var aa=x;aa<=y;aa++){var ba=new (c('CubemapImageTileInfo'))(p,t,z,aa);this.$TiledSphericalRenderer12.push(ba);this.$TiledSphericalRenderer13.set(ba.getKey(),true)}}}};o.prototype.$TiledSphericalRenderer32=function(){this.$TiledSphericalRenderer14.forEach(function(p){var q=p.getKey();if(!this.$TiledSphericalRenderer13.has(q)){var r=this.$TiledSphericalRenderer15.get(q);if(r)r.exitView();}}.bind(this));this.$TiledSphericalRenderer14=[];this.$TiledSphericalRenderer12.forEach(function(p){this.$TiledSphericalRenderer14.push(p);var q=p.getKey(),r=this.$TiledSphericalRenderer15.get(q),s=this.$TiledSphericalRenderer38(p);if(!r){r=new (c('TileRendererState'))(p,s);this.$TiledSphericalRenderer15.set(q,r)}else if(!r.isInView){r.enterView(s)}else{var t=this.$TiledSphericalRenderer8-this.$TiledSphericalRenderer9;if(r.shouldFetch(t))this.$TiledSphericalRenderer39(p);r.update(t,s)}}.bind(this))};o.prototype.$TiledSphericalRenderer36=function(){var p=this.__verticalFieldOfView,q=this.__horizontalFieldOfView,r=this.__canvas.height/p,s=3400/2,t=0,u=this.$TiledSphericalRenderer1.getTileContentSize()/90,v=1.4;while(u*v<r&&u*p<s&&u*q<s){t++;u*=2}return Math.min(t,this.$TiledSphericalRenderer1.getMaxTileLevel())};o.prototype.$TiledSphericalRenderer37=function(){var p=j.toRadian(this.__verticalFieldOfView),q=j.toRadian(this.__horizontalFieldOfView),r=1,s=Math.tan(q/2)*r,t=Math.tan(p/2)*r,u=[l.fromValues(-s,t,-r),l.fromValues(s,t,-r),l.fromValues(s,-t,-r),l.fromValues(-s,-t,-r)],v=k.create();k.invert(v,this.__rotationMatrix);this.$TiledSphericalRenderer40(v,u);var w=[];for(var x=0;x<6;x++){var y=this.$TiledSphericalRenderer18[x],z=[];for(var aa=0;aa<y.length;aa++)z.push(l.clone(y[aa]));var ba=this.$TiledSphericalRenderer41(z,u);if(ba.length>0){var ca=k.create();k.invert(ca,this.$TiledSphericalRenderer17[x]);this.$TiledSphericalRenderer40(ca,ba);var da=ba[0],ea=da[0],fa=da[0],ga=da[1],ha=da[1];for(var ia=1;ia<ba.length;ia++){da=ba[ia];ea=Math.min(ea,da[0]);fa=Math.max(fa,da[0]);ga=Math.min(ga,da[1]);ha=Math.max(ha,da[1])}w[x]={minX:this.$TiledSphericalRenderer3+ea,maxX:this.$TiledSphericalRenderer3+fa,minY:this.$TiledSphericalRenderer3-ha,maxY:this.$TiledSphericalRenderer3-ga}}}return w};o.prototype.$TiledSphericalRenderer40=function(p,q){for(var r=0;r<q.length;r++)l.transformMat4(q[r],q[r],p);};o.prototype.$TiledSphericalRenderer41=function(p,q){var r=q[q.length-1];for(var s=0;s<q.length;s++){var t=q[s],u=[],v=l.create();l.cross(v,r,t);var w=p[p.length-1],x=l.dot(v,w),y=x>=0;for(var z=0;z<p.length;z++){var aa=p[z],ba=l.dot(v,aa),ca=ba>=0;if(ca!==y){var da=this.$TiledSphericalRenderer42(w,x,aa,ba);if(!l.exactEquals(w,da)&&!l.exactEquals(aa,da))u.push(da);}if(ca)u.push(aa);w=aa;x=ba;y=ca}p=u;if(p.length===0)break;r=t}return p};o.prototype.$TiledSphericalRenderer42=function(p,q,r,s){var t=-q/(s-q),u=l.create();l.subtract(u,r,p);l.scale(u,u,t);l.add(u,u,p);return u};o.prototype.$TiledSphericalRenderer46=function(p,q){var r=p.getKey(),s=q.get(r);if(s){this.$TiledSphericalRenderer47(s);this.$TiledSphericalRenderer35()}};o.prototype.$TiledSphericalRenderer33=function(p){var q=p.getKey(),r=void 0,s=void 0,t=void 0;r=this.$TiledSphericalRenderer15.get(q);if(!r)return 0;s=r.closestCoveringTile;t=r.closestPrevTile;if(!s||!t)return 0;var u=2*this.$TiledSphericalRenderer3,v=this.$TiledSphericalRenderer3,w=Math.pow(2,p.level),x=u/w,y=p.col*x,z=p.row*x,aa=-v+y,ba=aa+x,ca=v-z,da=ca-x,ea=[[aa,ca,-v],[ba,ca,-v],[aa,da,-v],[ba,da,-v]],fa=this.$TiledSphericalRenderer17[p.face],ga=[];for(var ha=0;ha<ea.length;ha++){l.transformMat4(ea[ha],ea[ha],fa);ga.push(ea[ha][0]);ga.push(ea[ha][1]);ga.push(ea[ha][2])}var ia={};this.$TiledSphericalRenderer49(this.$TiledSphericalRenderer19,ga,3);this.__gl.activeTexture(this.$TiledSphericalRenderer23);if(s){ia=this.$TiledSphericalRenderer50(s)}else ia=this.$TiledSphericalRenderer51(p);var ja=this.$TiledSphericalRenderer52(p,ia);this.$TiledSphericalRenderer49(this.$TiledSphericalRenderer20,ja,2);this.__gl.activeTexture(this.$TiledSphericalRenderer24);var ka=new (c('CubemapImageTileInfo'))(0,p.face,0,0),la=this.$TiledSphericalRenderer5.get(ka.getKey());if(!la)throw new Error('[Tile] Base level should have been loaded.');this.__gl.bindTexture(this.__gl.TEXTURE_2D,la);var ma=this.$TiledSphericalRenderer52(p,ka);this.$TiledSphericalRenderer49(this.$TiledSphericalRenderer21,ma,2);if(r&&t){this.__gl.activeTexture(this.$TiledSphericalRenderer25);ia=this.$TiledSphericalRenderer50(t);var na=this.$TiledSphericalRenderer52(p,ia);this.$TiledSphericalRenderer49(this.$TiledSphericalRenderer22,na,2);var oa=this.__gl.getUniformLocation(this.__shaderProgram,'progress');this.__gl.uniform1f(oa,r.blendingProgress)}this.__gl.drawArrays(this.__gl.TRIANGLE_STRIP,0,ga.length/3);this.__gl.bindTexture(this.__gl.TEXTURE_2D,null);this.$TiledSphericalRenderer11.forEach(function(pa){this.__gl.bindBuffer(this.__gl.ARRAY_BUFFER,pa);this.__gl.bufferData(this.__gl.ARRAY_BUFFER,1,this.__gl.STATIC_DRAW);this.__gl.deleteBuffer(pa)}.bind(this));this.$TiledSphericalRenderer11=[];return this.$TiledSphericalRenderer53(ia.level)};o.prototype.$TiledSphericalRenderer49=function(p,q,r){var s=this.__gl.createBuffer();this.$TiledSphericalRenderer11.push(s);this.__gl.bindBuffer(this.__gl.ARRAY_BUFFER,s);this.__gl.bufferData(this.__gl.ARRAY_BUFFER,new Float32Array(q),this.__gl.STATIC_DRAW);this.__gl.vertexAttribPointer(p,r,this.__gl.FLOAT,false,0,0)};o.prototype.$TiledSphericalRenderer53=function(p){var q=this.__canvas.height/this.__verticalFieldOfView,r=90/Math.pow(2,p),s=this.$TiledSphericalRenderer1.getTileContentSize()/r;return s/q};o.prototype.$TiledSphericalRenderer52=function(p,q){var r=this.$TiledSphericalRenderer1.getTilePaddingPixels(),s=r/this.$TiledSphericalRenderer1.getTileTotalSize(),t=this.$TiledSphericalRenderer1.getTileContentSize()/this.$TiledSphericalRenderer1.getTileTotalSize(),u=Math.pow(2,p.level-q.level),v=t/u,w=p.col-u*q.col,x=p.row-u*q.row,y=s+w*v,z=s+x*v;return [y,z,y+v,z,y,z+v,y+v,z+v]};o.prototype.$TiledSphericalRenderer50=function(p){var q=void 0;if(p.level===0){q={lastUsedTime:0,texture:this.$TiledSphericalRenderer5.get(p.getKey())}}else q=this.$TiledSphericalRenderer4.get(p.getKey());if(q){this.__gl.bindTexture(this.__gl.TEXTURE_2D,q.texture);q.lastUsedTime=this.$TiledSphericalRenderer8;return p}throw new Error('No possible tile for requested params: '+p.getKey())};o.prototype.$TiledSphericalRenderer51=function(p){var q=0;while(q<=p.level){var r=p.getInfoForOffsetLevel(q),s=r.getKey(),t=void 0;if(r.level===0){t={lastUsedTime:0,texture:this.$TiledSphericalRenderer5.get(s)}}else t=this.$TiledSphericalRenderer4.get(s);if(t){this.__gl.bindTexture(this.__gl.TEXTURE_2D,t.texture);t.lastUsedTime=this.$TiledSphericalRenderer8;return r}else this.$TiledSphericalRenderer1.loadTileImage(r,this.$TiledSphericalRenderer43,this.$TiledSphericalRenderer8);q++}throw new Error('No possible tile for requested params: '+p.getKey())};o.prototype.$TiledSphericalRenderer38=function(p){var q=0;while(q<=p.level){var r=p.getInfoForOffsetLevel(q),s=r.getKey();if(this.$TiledSphericalRenderer5.has(s)||this.$TiledSphericalRenderer4.has(s))return r;q++}throw new Error('No possible tile for requested params: '+p.getKey())};o.prototype.$TiledSphericalRenderer29=function(){var p=this.$TiledSphericalRenderer1.getBaseLevelImageTiles();p.forEach(function(q){var r=this.__copyTextureToGLBuffer({image:q.getImg()},this.__gl.TEXTURE_2D),s=this.__gl.getError();if(s!==0)this.__emitRenderingError(s);this.$TiledSphericalRenderer5.set(q.getInfo().getKey(),r)}.bind(this))};o.prototype.$TiledSphericalRenderer30=function(){var p=this.$TiledSphericalRenderer1.getViewportImageTiles();p.forEach(function(q){var r=this.__copyTextureToGLBuffer({image:q.getImg()},this.__gl.TEXTURE_2D),s=this.__gl.getError();if(s!==0)this.__emitRenderingError(s);var t={texture:r,lastUsedTime:c('performanceNow')()};this.$TiledSphericalRenderer4.set(q.getInfo().getKey(),t)}.bind(this))};o.prototype.$TiledSphericalRenderer47=function(p){var q,r=this,s=p.getInfo().getKey(),t=this.$TiledSphericalRenderer4.get(s);if(!t){var u=this.__copyTextureToGLBuffer({image:p.getImg()},this.__gl.TEXTURE_2D),v=this.__gl.getError();if(v!==0)this.emit('renderingError','WebGL Error Code: '+v);t={texture:u,lastUsedTime:c('performanceNow')()};this.$TiledSphericalRenderer4.set(s,t);if(this.$TiledSphericalRenderer4.size>n)(function(){var w=s,x=t;r.$TiledSphericalRenderer4.forEach(function(y,z){if(y.lastUsedTime<x.lastUsedTime){w=z;x=y}});r.__gl.deleteTexture(x.texture);r.$TiledSphericalRenderer4['delete'](w)})();}};o.prototype.$TiledSphericalRenderer26=function(){this.$TiledSphericalRenderer17=[];var p=k.create();k.identity(p);k.rotateY(p,p,j.toRadian(-90));this.$TiledSphericalRenderer17[m.PLUS_X]=p;var q=k.create();k.identity(q);k.rotateY(q,q,j.toRadian(90));this.$TiledSphericalRenderer17[m.MINUS_X]=q;var r=k.create();k.identity(r);k.rotateZ(r,r,j.toRadian(180));k.rotateX(r,r,j.toRadian(-90));this.$TiledSphericalRenderer17[m.PLUS_Y]=r;var s=k.create();k.identity(s);k.rotateZ(s,s,j.toRadian(180));k.rotateX(s,s,j.toRadian(90));this.$TiledSphericalRenderer17[m.MINUS_Y]=s;var t=k.create();k.identity(t);k.rotateY(t,t,j.toRadian(180));this.$TiledSphericalRenderer17[m.PLUS_Z]=t;var u=k.create();k.identity(u);this.$TiledSphericalRenderer17[m.MINUS_Z]=u;this.$TiledSphericalRenderer18=[];var v=this.$TiledSphericalRenderer3,w=[l.fromValues(-v,v,-v),l.fromValues(v,v,-v),l.fromValues(v,-v,-v),l.fromValues(-v,-v,-v)];for(var x=0;x<6;x++){var y=this.$TiledSphericalRenderer17[x],z=[];for(var aa=0;aa<w.length;aa++){var ba=l.create();l.transformMat4(ba,w[aa],y);z.push(ba)}this.$TiledSphericalRenderer18[x]=z}};o.prototype.$TiledSphericalRenderer39=function(p){var q=p;while(!this.$TiledSphericalRenderer5.has(q.getKey())&&!this.$TiledSphericalRenderer4.has(q.getKey())){this.$TiledSphericalRenderer1.loadTileImage(q,this.$TiledSphericalRenderer43,this.$TiledSphericalRenderer8);q=q.getInfoForOffsetLevel(1)}};o.__subClassMethods={__getFragmentShaderScript:true,__getVertexShaderScript:true,__getShaderPerspectiveMatrixUniformName:true,__getShaderRotationMatrixUniformName:true,__renderInternal:true,__shaderProgramReady:true,__getMaxGPUMemoryUsedBytes:true,__getPrevFrameTextureScreenRatio:true,__createTexture:true,__clearCache:true};f.exports=o}),null);